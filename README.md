![This Github repository is based on v1.0.2 of the final-paper repository.](https://img.shields.io/badge/final--paper-v1.0.2-brightgreen)

> **ECO481** Health and Economic Inequality, *University of Toronto*
> 
> Prof. Michael Stepner

# üìù Final Paper

It's now time to take everything you've learned in this class and apply it to the empirical analysis in your final paper. You've completed an in-class lab and a midterm paper. You've given feedback to your peers and received feedback from them. You've participated in almost a dozen class discussions about health and economic inequality. And you're now well-prepared to perform an empirical analysis of health and economic inequality, and submit a thoughtful essay along with reproducible code.

This assignment is fundamentally the same as the midterm paper, but twice the length. The extra length gives you space to conduct a deeper empirical analysis and explore your data and results more thoroughly.

### Checklist for submission

- [ ] Submit paper on Quercus
    - [ ] Your paper does not contain your name, so it can be graded and peer reviewed anonymously.
- [ ] Submit code and data on Github
    - [ ] Your [raw data is uploaded](#%EF%B8%8F-uploading-your-raw-data): it appears in `data/raw`.
    - [ ] **validate_sources** Github Action runs successfully: your raw data sources are documented in `data/raw/source.yaml`.
    - [ ] **build** Github Action runs successfully: your code runs automatically without errors.
    - [ ] Your code produces all the results (numbers, figures, tables) discussed in your paper: the code [outputs them](#%EF%B8%8F-submitting-your-work) to the `results` folder, and they can be viewed in the results zip file that is automatically generated by the most recent **build** Github Action. (üÜï‚ú® the zip file of results was not automatically created in the midterm paper repositories.)
- [ ] Submit reflection survey on Quercus within 24 hours after the paper due date.

<!--
### Reminders about AI

- It is an academic offense to be dishonest in your description of how you used AI tools to assist with your work.
    - To be clear: in this class, you are allowed to use AI tools so long as you accurately describe how they were used.
- The reflection survey is due on Quercus 24 hours after the due date for the paper. If you have an extension for the paper, you also have an extension for the reflection survey
    - If you did not use AI, you can check a box to say so and skip the remaining questions, but **you must still complete the survey**.
    - Late submissions will reduce your grade on the midterm paper.
-->

# ‚¨ÜÔ∏è Uploading your raw data

In order to reproduce your results, we need to store a copy of the raw data that you used to create them. But git is not a suitable tool for storing raw data: it is designed to manage small files of plain text, not big files containing binary data. We are therefore using a tool called [DVC](https://dvc.org/), which stands for Data Version Control. It works with git to store and sync copies of the raw data.

Your raw data must be stored in the `data/raw` subfolder of your Github repository. Each data file will be tracked in the Github repository as a small text file ending in `.dvc`. This small text file contains the information that the DVC software uses to download the actual data file.

1. To upload your raw data, [submit it online using this form](https://form.jotform.com/233317985827166).
    - After you hit Submit, your uploaded files will be transferred into your Github repository using DVC.
    - If the uploaded files are not transferred within 5 minutes, you can post on Quercus to ask for assistance.
2. After uploading your raw data, you need to document its source in [data/raw/source.yaml](data/raw/source.yaml).
    - There is already an example there. Follow the same format to document the files you add.
    - The **validate_sources** Github Action will run automatically to check that you have added documentation for each file in `data/raw`.

*If you're working online in Github Codespaces*, you don't need to install any software or do any other configuration. The data will be automatically synced to your codespace when you pull the latest commit from your repository.

*If you're working locally on your own computer*, you need to make sure that you store the same files in `data/raw` on your local computer that you uploaded to DVC. When you commit your code to the repository, the **build** Github Action will access your data using DVC. To make sure that the code has access to the same data whether it is run locally on your computer or automatically in the cloud, you need to make sure that your local `data/raw` folder only contains the data that you've submitted to DVC. Otherwise the **build** Github Action will fail with an error.

# ‚û°Ô∏è Submitting your work

* **You must save your code in Github, in a file named `submission`** located in the root directory of the repository (not in a subfolder).
    - This will be `submission.ipynb` if you're submitting a Jupyter Notebook.
    - This will be `submission.py`, `submission.r` or `submission.do` if you're submitting a script, depending on the programming language you chose.

* Your code must output any numbers you report in the text of the paper as a `.yaml` file in the `results` folder.
    - **This YAML file will not be committed to the Github repository.**
        - The YAML file will be visible in your Github Codespace or on your local computer after running your code.
        - When you submit your *code* by committing it to Github, your *results* will be automatically recalculated by running your code.

* Your code must output any figures you display in the paper as `.png` or `.pdf` files in the `results` folder.
    - **These figures will not be committed to the Github repository.**
        - The files will be visible in your Github Codespace or on your local computer after running your code.
        - When you submit your *code* by committing it to Github, your *figures* will be automatically regenerated by running your code.

* Your code must output the numbers for any table you display in the paper as `.csv`, `.xlsx`, `.xls` or `.yaml` files in the `results` folder.
    - **These tables will not be committed to the Github repository.**
        - The files will be visible in your Github Codespace or on your local computer after running your code.
        - When you submit your *code* by committing it to Github, your *tables* will be automatically regenerated by running your code.

* Each time you commit your code to Github, it will automatically trigger a Github Action that runs your code.
    - You can see the status of this automated build from the main page of your repository.
        - üü° If it's in progress, you'll see a yellow circle.
        - ‚ùå If your code has an error, you'll see a red x.
        - ‚úÖ If your code runs to completion, you'll see a green check.

# üõ†Ô∏è Advice and Troubleshooting

I recommend completing this assignment using the same development environment you used for previous assignments. (Although you are not required to.)

‚ö†Ô∏è **If you are using Stata, you must once again configure your license in Github** by following the [instructions in this guide](https://github.com/ECO481-Stepner/files/wiki/Stata-License).

### Useful References

The same example code from the *At-Home Setup* is still available for your reference in this repository. There is an `example_notebook` and `example_script` for Python, R and Stata (so 6 examples in total). You can also refer back to the code you submitted in previous assignments, if anything there is helpful to you.

For reference, you can review [my advice for choosing your development environment](https://github.com/ECO481-Stepner/files/wiki/Choosing) and the more detailed guidance and troubleshooting advice for common issues in the guides below:

|          | Python | R      | Stata  |
|----------|--------|--------|--------|
| ‚òÅÔ∏è **Online** | [Guide](https://github.com/ECO481-Stepner/files/wiki/%E2%98%81%EF%B8%8F-Online:-Python) | [Guide](https://github.com/ECO481-Stepner/files/wiki/%E2%98%81%EF%B8%8F-Online:-R) | [Guide](https://github.com/ECO481-Stepner/files/wiki/%E2%98%81%EF%B8%8F-Online:-Stata) |
| üíª **Local** | [Guide](https://github.com/ECO481-Stepner/files/wiki/%F0%9F%92%BB-Local:-Python) | [Guide](https://github.com/ECO481-Stepner/files/wiki/%F0%9F%92%BB-Local:-R) | [Guide](https://github.com/ECO481-Stepner/files/wiki/%F0%9F%92%BB-Local:-Stata) |
